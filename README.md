# JD에 맞춘 데이터 분석 예시

이 프로젝트는 **카카오페이와 유사한 서비스 환경**을 시뮬레이션하기 위해, 분석 가능한 수준의 가상 데이터를 생성합니다. 데이터는 **유저 테이블**과 **이벤트 로그 테이블**로 구성되며, 퍼널 분석·이탈 예측·전환 분석 등 다양한 분석 작업에 사용할 수 있도록 설계되었습니다.

***

## 🔧 1. 전체 개요

* 데이터 생성 목적: 실제 카카오페이 서비스의 고객 여정을 모사하여 **분석 역량을 증명**할 수 있는 포트폴리오용 데이터 구축
* 생성 방식: Python 기반의 랜덤 시뮬레이션
* 포함 데이터:
    * `user_table.csv`: 유저의 성별, 연령대, 지역, 가입일 등 프로필 정보
    * `event_log.csv`: 유저가 보험·카드·대출 상품을 탐색하며 남긴 단계별 활동 기록

***

## 👤 2. `user_table.csv` – 유저 테이블 생성

### 📌 함수: `generate_user_table(n_users, save_dir)`

유저 기본 정보를 랜덤하게 생성하고, 가입일 기준으로 정렬하여 저장합니다.

| 컬럼명 | 설명 |
| --- | --- |
| `user_id` | 고유 사용자 ID (예: `user_0`, `user_1` 등) |
| `gender` | 성별 (`M` 또는 `F`) |
| `age_group` | 연령대 (`10`, `20`, `30`, ..., `60+`) |
| `join_date` | 가입일시 (정확한 시/분/초 포함) |
| `region` | 지역 (서울, 경기, 부산 등 비율 기반 분포) |

### 🎲 주요 로직 설명

* 연령대 및 지역은 확률분포를 기반으로 현실적인 분포를 재현합니다.
* `join_date`는 랜덤하게 생성되지만 연도는 2024년에 고정되어 분석 편의성을 높입니다.
* 가입일 기준으로 정렬 후 유저 ID를 부여하여 데이터 일관성을 유지합니다.

***

## 🧾 3. `event_log.csv` – 서비스 이벤트 로그 생성

### 📌 함수: `generate_event_log(user_table, save_dir)`

각 유저가 카카오페이의 3가지 주요 서비스(보험, 카드, 대출)를 탐색하는 과정을 시뮬레이션합니다. 각 서비스에는 \*\*여러 단계의 전환 여정(Funnel Steps)\*\*이 있으며, 이탈/완료 여부에 따라 로그가 다르게 생성됩니다.

#### 🎯 캠페인 종류 및 전환 단계

| 캠페인 종류 | 단계 (여정 단계) |
| ------ | ---------- |
| 보험 (`insurance`) | event\_participation → click\_diagnosis → identity\_verification → click\_consult |
| 카드 (`card`) | card\_select → identity\_verification → join\_event |
| 대출 (`loan`) | click\_compare → check\_limit → agree\_terms |

### 📄 event\_log 컬럼 설명

| 컬럼명 | 설명 |
| --- | --- |
| `user_id` | 이벤트를 발생시킨 유저 ID |
| `campaign_type` | 보험 / 카드 / 대출 캠페인 구분 |
| `event_name` | 전환 단계 이름 (ex. identity\_verification) |
| `event_time` | 해당 이벤트 발생 시각 (유저 가입일 + 랜덤 시간 증가분) |

### ⚙️ 주요 시뮬레이션 로직

1. **캠페인 선택**:
    * 유저마다 1\~3개의 캠페인을 무작위로 선택하여 참여 (중복 없음).
2. **이탈 시뮬레이션**:
    * 캠페인 전체를 완료하는 확률은 5%로 설정되어 전환 분석이 가능하도록 설계.
    * 중간 단계에서 약 30% 확률로 이탈 발생.
3. **이벤트 시간**:
    * 가입일 이후 무작위 시작 시각 + 각 단계마다 1\~10초 이내 딜레이를 더해 타임라인 생성.
4. **결과 정렬**:
    * 전체 이벤트를 시간 기준으로 정렬하여 흐름 파악이 가능하게 구성.

***

## 📊 예시 시나리오

> 예: user\_15가 대출 캠페인에 참여한 로그

| user\_id | campaign\_type | event\_name | event\_time |
| ------- | ------------- | ---------- | ---------- |
| user\_15 | loan | click\_compare | 2024-03-02 14:22:10 |
| user\_15 | loan | check\_limit | 2024-03-02 14:22:18 |
| user\_15 | loan | agree\_terms | 2024-03-02 14:22:27 |

***

## 📁 파일 저장 경로

* `save_dir` 인자를 통해 다음 경로에 자동 저장됩니다:
    * `user_table.csv`
    * `event_log.csv`


## 📊 분석 기능 개요

생성된 사용자 데이터 및 이벤트 로그를 기반으로 **퍼널 분석**, **코호트 분석**, **LTV 분석**, **AARRR 분석**을 수행합니다. 각 분석은 실제 서비스에서 고객의 전환, 유지, 수익성 등을 평가하는 데 사용되는 실무 중심의 분석 기법입니다.

***

## 1️⃣ Funnel Analysis (전환 퍼널 분석)

### 📌 목적

각 서비스(보험, 카드, 대출)에서 유저가 전환 단계별로 얼마나 이탈/완료했는지를 시각적으로 분석합니다.

### 📈 구현 방식

* 캠페인별 단계 순서를 기반으로 각 단계의 **유니크 유저 수**를 계산
* `Plotly`를 활용해 퍼널 형태로 시각화
* `user_id` 기준으로 전환율(`value+percent initial`)까지 표시

* 전환율이 가장 낮은 지점을 통해 UX 개선 포인트를 유추 가능

***

## 2️⃣ Cohort Analysis (코호트 분석)

### 📌 목적

가입일 기준으로 그룹(cohort)을 나눈 후, **행동 패턴**이나 **이벤트 참여율**을 비교합니다.

### 🧪 분석 2종 구성

#### ▶ 단일 기준일 기반 3분할 코호트

* `base_date`를 기준으로 ±10일을 중심으로 `"before"`, `"target"`, `"after"` 그룹 분할
* 각 그룹에서 이벤트별 유니크 유저 수 비교
* Bar Chart로 시각화

#### ▶ 주차별 가입 Cohort + 월별 이용률 분석

* `base_date`부터 6주간 주차 기준 cohort 생성
* 각 유저의 `가입 후 n개월 차`별로 이벤트 참여율 계산
* Cohort Heatmap용 테이블 출력

### 예시 활용

* 마케팅 캠페인 시작일 전/후 유입 유저의 **행동 변화 비교**
* 특정 시점 유입 유저의 **재방문율** 추적

***

## 3️⃣ LTV Analysis (Lifetime Value 분석)

### 📌 목적

유저별 캠페인 최종 전환을 기준으로 \*\*가상 매출(수익 기여도)\*\*를 산출합니다.

### 🧮 계산 방식

* 보험: `click_consult`, 카드: `join_event`, 대출: `agree_terms`를 **최종 전환 지표**로 간주
* 전환 1건당 1만 원의 가상 수익을 부여
* 유저별 누적 전환 수 × 1만 원 → `LTV`

### 📊 출력 결과

* 유저별 LTV 테이블 (`ltv_df`)
* 전체 LTV 통계 (평균, 중앙값, 표준편차 등)
* Top 10 유저 목록

### 활용 사례

* 상위 LTV 유저 그룹의 특성 분석
* 추천 캠페인, 리텐션 전략 수립의 기준점

***

## 4️⃣ AARRR 분석 프레임워크

### 📌 목적

스타트업이나 서비스 기획에서 자주 쓰이는 **AARRR 모델**을 적용해 유저의 전체 여정 분석

| 단계 | 구현 내용 |
| --- | ----- |
| **Acquisition** | 유입 채널별 유저 수 (`join_channel` 컬럼 존재 시) |
| **Activation** | 첫 이벤트 이후 2단계 이상 도달 유저 비율 + 평균 소요 시간 |
| **Retention** | 가입 후 1일/7일/30일 리텐션 비율 |
| **Revenue** | LTV 평균, 중앙값, 상위/하위 그룹 비교 |
| **Referral** | 추천 이벤트 참여 유저 수 및 이들의 평균 LTV/리텐션 (해당 이벤트 존재 시) |


### 활용

* 서비스 기획자/마케터 관점의 전환/유지 전략 수립
* 성과 지표 추적 및 향후 개선 KPI 설정